var app=angular.module("app",["ui.router","ngAnimate"]);app.config(["$stateProvider","$urlRouterProvider",function(n){n.state("ManagerOption",{url:"/ManagerOption",templateUrl:"Assessment/ManagerOption"}).state("ManagerSuggest",{url:"/ManagerSuggest",templateUrl:"Assessment/ManagerSuggest"}).state("SetManager",{url:"/SetManager",templateUrl:"Assessment/SetManager"})}]);app.run(["$http","$window",function(n){n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";n.defaults.headers.common.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val()}]);app.service("appService",["$http",function(n){this.GetScorePeople=function(t){return n.post("Assessment/GetScorePeople",t)};this.GetManageYearList=function(t){return n.post("Assessment/GetManageYearList",t)};this.GetAllManageAssessments=function(t){return n.post("Assessment/GetAllManageAssessments",t)};this.CreateManageResponse=function(t){return n.post("Assessment/CreateManageResponse",t)};this.SetScorePeople=function(t){return n.post("Assessment/SetScorePeople",t)};this.ManageResponseStateCheck=function(t){return n.post("Assessment/ManageResponseStateCheck",t)};this.GetAllScoreManagers=function(t){return n.post("Assessment/GetAllScoreManagers",t)};this.UpdateScoreManagers=function(t){return n.post("Assessment/UpdateScoreManagers",t)}}]);app.factory("myFactory",function(){function t(t){n.manager=t}function i(){return n}var n={};return{set:t,get:i}});app.controller("ManageCtrl",["$scope","$location","appService","$rootScope",function(n,t){t.path("/ManagerOption")}]);app.controller("ManagerOptionCtrl",["$scope","$location","appService","$rootScope","myFactory","$window",function(n,t,i,r,u,f){i.GetScorePeople({}).then(function(t){n.GetScorePeople=t.data}).catch(function(){alert("Error")});n.ManagerSuggest=function(n){t.path("/ManagerSuggest");u.set(n)};n.SetManager=function(){t.path("/SetManager")};n.CheckState=()=>{n.loading=!0,i.ManageResponseStateCheck({}).then(t=>{n.manageResponseStates=t.data,n.loading=!1}).catch(()=>{alert("Error")})};n.GetAllScoreManagers=()=>{n.scoreManagers||i.GetAllScoreManagers({}).then(t=>{n.scoreManagers=t.data;for(let n of n.scoreManagers)n.selected=!0}).catch(()=>alert("Error"))};n.UpdateScoreManagers=()=>{let t=n.scoreManagers.filter(n=>n.selected===!0);i.UpdateScoreManagers({selectedManagers:t}).then(()=>{f.location.href="Assessment/Manage"}).catch(()=>{alert("Error")})}}]);app.controller("ManagerSuggestCtrl",["$scope","$window","appService","$rootScope","myFactory","$timeout",function(n,t,i,r,u,f){function o({target:n}){n.classList.contains("autoExpand")&&!0&&(n.style.height="",n.style.height=Math.min(n.scrollHeight,e)+"px")}n.ManageAssessments=[];n.manager=u.get().manager;n.data={model:null,availableOptions:[]};n.clicked=!1;n.clickclick=()=>{n.clicked=!0};let e=250;i.GetManageYearList({}).then(function(t){n.years=t;t.data.forEach(function(t){n.data.availableOptions.push({id:t,name:t})});n.data.model=n.data.availableOptions[0].name});n.GetAllManageAssessments=function(){i.GetAllManageAssessments({year:n.data.model,manager:n.manager}).then(function(t){n.ManageAssessments=t.data.Responses;n.state=t.data.State;f(function(){var n=document.querySelectorAll(".autoExpand");for(let n of n)n.style.height="",n.style.height=Math.min(n.scrollHeight,e)+"px"},0)}).catch(function(){alert("Error")})};n.GetAllManageAssessments();n.CreateManageResponse=function(r){i.CreateManageResponse({assessments:n.ManageAssessments,state:r,year:n.data.model,manager:n.manager}).then(function(){r==="save"?(n.succeed=!0,f(function(){n.succeed=!1},2e3)):t.location.href="Assessment/Manage"})};n.ToManage=function(){t.location.href="Assessment/Manage"};document.addEventListener("input",o)}]);app.controller("SetManagerCtrl",["$scope","$window","appService","$rootScope","myFactory",function(n,t,i){i.SetScorePeople({}).then(function(t){n.SetScorePeople=t.data}).catch(function(){alert("Error")})}]);